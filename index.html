<!DOCTYPE html>
<html lang="zh">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<!-- 引入css -->
		<link rel="icon" href="./img/badminton.ico" />
		<link rel="stylesheet" type="text/css" href="css/layout.css" />
		<link rel="stylesheet" type="text/css" href="css/base.css" />
		<link rel="stylesheet" type="text/css" href="css/style.css" />
		<link rel="stylesheet" type="text/css" href="css/media.css" />
		<!-- 引入js -->
		<script src="js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8"></script>
		<title>羽毛球计分器</title>
	</head>
	<body>
		<!-- 主要内容板块 -->
		<div class="counter">
			<div class="counter-title">羽毛球计分器</div>
			<div class="container">
				<div class="row">
					<div class="col-xl-5 col-md-4 col-sm-12">
						<div class="red card  ">
							<span class="porint left-point">0</span>
							<div class="button-mark">
								<div class="button-mark-left"></div>
								<div class="button-mark-right"></div>
							</div>
						</div>
					</div>
					<div class="col-xl-1 col-md-2 col-sm-6 col-6">
						<div class="red-pro red">
							<span class="porint">0</span>
						</div>
						<div class="porint-reset">重置记分牌</div>
					</div>
					<div class="col-xl-1 col-md-2 col-sm-6 col-6">
						<div class="blue-pro blue">
							<span class="porint">0</span>
						</div>
						<div class="porint-check">查看比赛记录</div>
					</div>
					<div class="col-xl-5 col-md-4 col-sm-12">
						<div class="blue card ">
							<span class="porint right-point">0</span>
							<div class="button-mark">
								<div class="button-mark-left"></div>
								<div class="button-mark-right"></div>
							</div>
						</div>

					</div>

				</div>
			</div>
		</div>
		<!-- 主要内容板块 end -->
		<script type="text/javascript">
			$(".button-mark-left").click(function() {
				// console.log(this);
				let grade = $(this).parents('.button-mark').siblings('.porint').text() * 1
				if (grade !== 0) {
					$(this).parents('.button-mark').siblings('.porint').text(grade - 1)
					scaleAnmate($(this).parents('.button-mark').siblings('.porint'))

				}
				// console.log($(this).parents('.button-mark').siblings('.porint'));
			})
			let pointFlag = false
			$(".button-mark-right").click(function() {
				let grade = $(this).parents('.button-mark').siblings('.porint').text() * 1

				if (grade !== 30) {
					if (grade == 21) {
						// 获取左右比分进行比较
						let leftPoint = $(".left-point").text() * 1
						let rightPoint = $(".right-point").text() * 1

						if (leftPoint == 21 && rightPoint == 21) {
							console.log('21了');
							// $(this).parents('.button-mark').siblings('.porint').text(grade + 1)
							// scaleAnmate($(this).parents('.button-mark').siblings('.porint'))
							// console.log('双方21分');
						} else {
							if (leftPoint == 21) {
								$(".left-point").text(0)
								$(".red-pro").text($(".red-pro").text() * 1 + 1)
							}
							if (rightPoint == 21) {
								$(".blue-pro").text($(".blue-pro").text() * 1 + 1)
							}
						}
					} else {
						$(this).parents('.button-mark').siblings('.porint').text(grade + 1)
						scaleAnmate($(this).parents('.button-mark').siblings('.porint'))
					}
				}
			})
			$(".porint-reset").click(function() {
				scaleAnmate($(this))
				$(".card .porint").text(0)
			})
			$(".porint-check").click(function () {
				scaleAnmate($(this))
			})

			function scaleAnmate(obj) {
				if (!obj.hasClass('btn-scale')) {
					obj.addClass('btn-scale')
					setTimeout(function() {
						obj.removeClass('btn-scale')
					}, 500)
				}
			}
		</script>
	</body>
</html>
